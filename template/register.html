<!-- templates/register.html -->
{% extends 'base.html' %} {% load static %} {% block content %}
<div class="container">
  <h2>Register</h2>
  {% if messages %} {% for message in messages %}
  <div class="alert alert-{{ message.tags }}">{{ message }}</div>
  {% endfor %} {% endif %}

  <form method="POST" action="{% url 'register' %}">
    {% csrf_token %}
    <div class="form-group">
      <label for="fname">First Name</label>
      <input
        type="text"
        class="form-control"
        id="fname"
        name="fname"
        required
      />
    </div>
    <div class="form-group">
      <label for="lname">Last Name</label>
      <input
        type="text"
        class="form-control"
        id="lname"
        name="lname"
        required
      />
    </div>
    <div class="form-group">
      <label for="username">Username</label>
      <input
        type="text"
        class="form-control"
        id="username"
        name="username"
        required
      />
    </div>
    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        class="form-control"
        id="email"
        name="email"
        required
      />
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <input
        type="password"
        class="form-control"
        id="password"
        name="password"
        required
      />
    </div>
    <div class="form-group">
      <label for="confirmPassword">Confirm Password</label>
      <input
        type="password"
        class="form-control"
        id="confirmPassword"
        name="confirmPassword"
        required
      />
    </div>
    <div class="form-group">
      <label for="role">Role</label>
      <select class="form-control" id="role" name="role" required>
        <option value="">Select Role</option>
        <option value="student">Student</option>
        <option value="college_user">College User</option>
        <option value="admin">Admin</option>
      </select>
    </div>
    <div id="collegeFields" style="display: none">
      <div class="form-group">
        <label for="phone">Phone Number</label>
        <input type="text" class="form-control" id="phone" name="phone" />
      </div>
      <div class="form-group">
        <label for="college_name">College Name</label>
        <input
          type="text"
          class="form-control"
          id="college_name"
          name="college_name"
        />
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Register</button>
  </form>
  <p class="mt-3">
    Already have an account? <a href="{% url 'user_login' %}">Login here</a>
  </p>
</div>

<script>
  document.getElementById("role").addEventListener("change", function () {
    const collegeFields = document.getElementById("collegeFields");
    if (this.value === "college_user") {
      collegeFields.style.display = "block";
    } else {
      collegeFields.style.display = "none";
    }
  });
</script>
{% endblock %}
